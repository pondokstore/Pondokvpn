#!/bin/bash
clear

# Gradasi Biru Timbul
DARK_BLUE='\033[38;5;18m'   # Biru Tua (bayangan)
LIGHT_BLUE='\033[38;5;39m'  # Biru Terang (tengah)
MID_BLUE='\033[38;5;33m'    # Biru Sedang
CYAN_BLUE='\033[38;5;45m'   # Cyan Biru
WHITE='\033[1;37m'
GREEN='\033[1;32m'
RED='\033[1;31m'
YELLOW='\033[1;33m'
NC='\033[0m'

# Simbol Modern
ARROW='โถ'
CHECK='โ'
CROSS='โ'
GEAR='โ'
MONITOR='๐'
NETWORK='๐'
INSTALL='๐ฆ'
CLEAN='๐งน'
USER='๐ค'
TOOLS='๐ง'

function run(){
clear

# System Info
domain=$(cat /etc/xray/domain)
IPVPS=$(curl -s ipv4.icanhazip.com)
cores=$(awk -F: '/model name/ {core++} END {print core}' /proc/cpuinfo)
tram=$(free -m | awk 'NR==2 {print $2}')

# Service Status
openssh=$(systemctl status ssh | grep Active | awk '{print $3}' | sed 's/(//g' | sed 's/)//g')
ssh_ws=$(systemctl status ws | grep Active | awk '{print $3}' | sed 's/(//g' | sed 's/)//g')
xray=$(systemctl status xray | grep Active | awk '{print $3}' | sed 's/(//g' | sed 's/)//g')
nginx=$(systemctl status nginx | grep Active | awk '{print $3}' | sed 's/(//g' | sed 's/)//g')

# Status Check
status() {
    if [[ $1 == "running" ]]; then
        echo -e "${GREEN}${CHECK}${NC} Active"
    else
        echo -e "${RED}${CROSS}${NC} Inactive"
    fi
}

# Header dengan Efek Timbul
echo -e "${DARK_BLUE}โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ${NC}"
echo -e "${DARK_BLUE}โ${NC} ${WHITE}SYSTEM MONITORING${NC} ${MID_BLUE}โ${NC} ${WHITE}IP:${LIGHT_BLUE}$IPVPS${NC} ${MID_BLUE}โ${NC} ${WHITE}Domain:${LIGHT_BLUE}$domain${NC} ${MID_BLUE}โ${NC} ${WHITE}CPU:${LIGHT_BLUE}$cores${NC} ${MID_BLUE}โ${NC} ${WHITE}RAM:${LIGHT_BLUE}$tram MB${NC} ${DARK_BLUE}โ${NC}"
echo -e "${DARK_BLUE}โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโฃ${NC}"
echo -e "${DARK_BLUE}โ${NC} ${ARROW} SSH:$(status $openssh) ${MID_BLUE}โ${NC} ${ARROW} WS:$(status $ssh_ws) ${MID_BLUE}โ${NC} ${ARROW} Xray:$(status $xray) ${MID_BLUE}โ${NC} ${ARROW} Nginx:$(status $nginx) ${DARK_BLUE}โ${NC}"
echo -e "${DARK_BLUE}โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ${NC}"
echo ""
read -n 1 -s -r -p "${MID_BLUE}Press any key to return to menu...${NC}"
features
}

function features() {
clear

# Menu Header dengan Efek Timbul
echo -e "${DARK_BLUE}โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ${NC}"
echo -e "${DARK_BLUE}โ${NC} ${WHITE}SYSTEM CONTROL PANEL${NC} ${DARK_BLUE}                                                                               โ${NC}"
echo -e "${DARK_BLUE}โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโฃ${NC}"

# System Monitoring Group
echo -e "${DARK_BLUE}โ${NC} ${YELLOW}${MONITOR} SYSTEM MONITORING${NC} ${DARK_BLUE}                                                                           โ${NC}"
echo -e "${DARK_BLUE}โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโฃ${NC}"
echo -e "${DARK_BLUE}โ${NC} ${ARROW} ${LIGHT_BLUE}01.${NC} RUNNING SERVICE STATUS                                                            ${DARK_BLUE}โ${NC}"
echo -e "${DARK_BLUE}โ${NC} ${ARROW} ${LIGHT_BLUE}02.${NC} SYSTEM MONITOR                                                                  ${DARK_BLUE}โ${NC}"
echo -e "${DARK_BLUE}โ${NC} ${ARROW} ${LIGHT_BLUE}03.${NC} SPEEDTEST                                                                       ${DARK_BLUE}โ${NC}"
echo -e "${DARK_BLUE}โ${NC} ${ARROW} ${LIGHT_BLUE}04.${NC} CHECK BANDWIDTH                                                                 ${DARK_BLUE}โ${NC}"
echo -e "${DARK_BLUE}โ${NC} ${ARROW} ${LIGHT_BLUE}05.${NC} INFO PORT                                                                       ${DARK_BLUE}โ${NC}"
echo -e "${DARK_BLUE}โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโฃ${NC}"

# Service Management Group
echo -e "${DARK_BLUE}โ${NC} ${YELLOW}${GEAR} SERVICE MANAGEMENT${NC} ${DARK_BLUE}                                                                            โ${NC}"
echo -e "${DARK_BLUE}โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโฃ${NC}"
echo -e "${DARK_BLUE}โ${NC} ${ARROW} ${LIGHT_BLUE}06.${NC} RESTART ALL SERVICES                                                           ${DARK_BLUE}โ${NC}"
echo -e "${DARK_BLUE}โ${NC} ${ARROW} ${LIGHT_BLUE}07.${NC} FIX HAPROXY                                                                    ${DARK_BLUE}โ${NC}"
echo -e "${DARK_BLUE}โ${NC} ${ARROW} ${LIGHT_BLUE}08.${NC} FIX DROPBEAR                                                                   ${DARK_BLUE}โ${NC}"
echo -e "${DARK_BLUE}โ${NC} ${ARROW} ${LIGHT_BLUE}09.${NC} LIMIT SPEED                                                                    ${DARK_BLUE}โ${NC}"
echo -e "${DARK_BLUE}โ${NC} ${ARROW} ${LIGHT_BLUE}10.${NC} LIMIT IP XRAY                                                                 ${DARK_BLUE}โ${NC}"
echo -e "${DARK_BLUE}โ${NC} ${ARROW} ${LIGHT_BLUE}11.${NC} LIMIT IP SSH                                                                  ${DARK_BLUE}โ${NC}"
echo -e "${DARK_BLUE}โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโฃ${NC}"

# Network & Domain Group
echo -e "${DARK_BLUE}โ${NC} ${YELLOW}${NETWORK} NETWORK & DOMAIN${NC} ${DARK_BLUE}                                                                              โ${NC}"
echo -e "${DARK_BLUE}โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโฃ${NC}"
echo -e "${DARK_BLUE}โ${NC} ${ARROW} ${LIGHT_BLUE}12.${NC} CHANGE DOMAIN                                                                   ${DARK_BLUE}โ${NC}"
echo -e "${DARK_BLUE}โ${NC} ${ARROW} ${LIGHT_BLUE}13.${NC} MENU POINTING                                                                  ${DARK_BLUE}โ${NC}"
echo -e "${DARK_BLUE}โ${NC} ${ARROW} ${LIGHT_BLUE}14.${NC} FIX POINTING DOMAIN                                                            ${DARK_BLUE}โ${NC}"
echo -e "${DARK_BLUE}โ${NC} ${ARROW} ${LIGHT_BLUE}15.${NC} INSTALL SLOWDNS                                                               ${DARK_BLUE}โ${NC}"
echo -e "${DARK_BLUE}โ${NC} ${ARROW} ${LIGHT_BLUE}16.${NC} INSTALL WARP                                                                   ${DARK_BLUE}โ${NC}"
echo -e "${DARK_BLUE}โ${NC} ${ARROW} ${LIGHT_BLUE}17.${NC} INSTALL DNS MEDIA                                                             ${DARK_BLUE}โ${NC}"
echo -e "${DARK_BLUE}โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโฃ${NC}"

# Installation Tools Group
echo -e "${DARK_BLUE}โ${NC} ${YELLOW}${INSTALL} INSTALLATION TOOLS${NC} ${DARK_BLUE}                                                                            โ${NC}"
echo -e "${DARK_BLUE}โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโฃ${NC}"
echo -e "${DARK_BLUE}โ${NC} ${ARROW} ${LIGHT_BLUE}18.${NC} INSTALL PANEL                                                                   ${DARK_BLUE}โ${NC}"
echo -e "${DARK_BLUE}โ${NC} ${ARROW} ${LIGHT_BLUE}19.${NC} INSTALL NOOBZ VPN                                                               ${DARK_BLUE}โ${NC}"
echo -e "${DARK_BLUE}โ${NC} ${ARROW} ${LIGHT_BLUE}20.${NC} UNINSTALL NOOBZ VPN                                                            ${DARK_BLUE}โ${NC}"
echo -e "${DARK_BLUE}โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโฃ${NC}"

# Maintenance & Cleanup Group
echo -e "${DARK_BLUE}โ${NC} ${YELLOW}${CLEAN} MAINTENANCE & CLEANUP${NC} ${DARK_BLUE}                                                                          โ${NC}"
echo -e "${DARK_BLUE}โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโฃ${NC}"
echo -e "${DARK_BLUE}โ${NC} ${ARROW} ${LIGHT_BLUE}21.${NC} CLEAR CACHE                                                                     ${DARK_BLUE}โ${NC}"
echo -e "${DARK_BLUE}โ${NC} ${ARROW} ${LIGHT_BLUE}22.${NC} CLEAR LOG                                                                       ${DARK_BLUE}โ${NC}"
echo -e "${DARK_BLUE}โ${NC} ${ARROW} ${LIGHT_BLUE}23.${NC} AUTO DELETE EXPIRED ACCOUNTS                                                    ${DARK_BLUE}โ${NC}"
echo -e "${DARK_BLUE}โ${NC} ${ARROW} ${LIGHT_BLUE}24.${NC} AUTO REBOOT                                                                     ${DARK_BLUE}โ${NC}"
echo -e "${DARK_BLUE}โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโฃ${NC}"

# Account & System Utilities Group
echo -e "${DARK_BLUE}โ${NC} ${YELLOW}${USER} ACCOUNT & UTILITIES${NC} ${DARK_BLUE}                                                                            โ${NC}"
echo -e "${DARK_BLUE}โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโฃ${NC}"
echo -e "${DARK_BLUE}โ${NC} ${ARROW} ${LIGHT_BLUE}25.${NC} REGISTER VPS                                                                     ${DARK_BLUE}โ${NC}"
echo -e "${DARK_BLUE}โ${NC} ${ARROW} ${LIGHT_BLUE}26.${NC} CHANGE BANNER                                                                   ${DARK_BLUE}โ${NC}"
echo -e "${DARK_BLUE}โ${NC} ${ARROW} ${LIGHT_BLUE}27.${NC} SYSTEM SETTINGS                                                                 ${DARK_BLUE}โ${NC}"
echo -e "${DARK_BLUE}โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโฃ${NC}"
echo -e "${DARK_BLUE}โ${NC} ${ARROW} ${RED}X.${NC} EXIT                                                                               ${DARK_BLUE}โ${NC}"
echo -e "${DARK_BLUE}โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ${NC}"
echo ""
echo -ne "${MID_BLUE}Enter choice: ${NC}"
read menu

case $menu in
1) clear ; run ;;
2) clear ; gotop ;;
3) clear ; speedtest ;;
4) clear ; bw ;;
5) clear ; prot ;;
6) clear ; reset ;;
7) clear ; fixhap ;;
8) clear ; wget https://raw.githubusercontent.com/bowowiwendi/WendyVpn/ABSTRAK/fix.sh && chmod +x fix.sh && ./fix.sh ;;
9) clear ; limitspeed ;;
10) clear ; onoff ;;
11) clear ; on-offssh ;;
12) clear ; addhost ;;
13) clear ; menu_cf.sh ;;
14) clear ; fixcert ;;
15) clear ; rm -rf install; apt update; wget https://github.com/khaledagn/SlowDNS/raw/main/install; chmod 777 install; ./install --start ;;
16) clear ; bash warp.sh wg6 ;;
17) clear ; media ;;
18) clear ; m-panel ;;
19) clear ; git clone https://github.com/noobz-id/noobzvpns.git && cd noobzvpns/ && ./install.sh ;;
20) clear ; git clone https://github.com/noobz-id/noobzvpns.git && cd noobzvpns/ && ./uninstall.sh ;;
21) clear ; clearcache ;;
22) clear ; clearlog ;;
23) clear ; auto-delet.sh ;;
24) clear ; autoreboot ;;
25) clear ; add-ip ;;
26) clear ; nano /etc/banner.txt ;;
27) clear ; nano /etc/sysctl.conf ;;
x|X) clear ; exit 0 ;;
*) clear ; echo -e "${RED}Invalid option!${NC}" ; sleep 1 ; features ;;
esac
}

# Start script
features